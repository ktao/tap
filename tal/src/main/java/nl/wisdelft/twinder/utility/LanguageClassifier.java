package nl.wisdelft.twinder.utility;import java.util.ArrayList;import java.util.regex.Matcher;import java.util.regex.Pattern;import com.cybozu.labs.langdetect.Detector;import com.cybozu.labs.langdetect.DetectorFactory;import com.cybozu.labs.langdetect.LangDetectException;import com.cybozu.labs.langdetect.Language;public class LanguageClassifier {		private static final String LANGUAGE_PROFILE_DIR = PropertyReader.getString("tal.resources.language.profiles");		/** regular expression for URLs */	private static final String URIREGEX = 			"https?://([-A-Za-z0-9+&@#/%?=~_()|!:,.;]*[-A-Za-z0-9+&@#/%=~_()|])"; 		private static LanguageClassifier instance = null;		private LanguageClassifier() {		try {			DetectorFactory.loadProfile(LANGUAGE_PROFILE_DIR);		} catch (LangDetectException e) {			e.printStackTrace();		}	}		public static LanguageClassifier getInstance() {		if (instance == null) {			instance = new LanguageClassifier();		}		return instance;	}		private static String preProcessTweet(String tweet) {		tweet = tweet.replaceAll("@([A-Za-z0-9_]+)", "");		Pattern pattern = Pattern.compile("(\\w)\\1{3,}");		Matcher matcher = pattern.matcher(tweet);		while(matcher.find()) {			tweet = tweet.replaceFirst("(\\w)\\1{3,}", matcher.group().substring(0, 1));		}		tweet = tweet.replaceAll(URIREGEX, "");				return tweet;	}    public String detect(String text) {        Detector detector;		try {			detector = DetectorFactory.create();			 detector.append(preProcessTweet(text));		     return detector.detect();		} catch (LangDetectException e) {			System.err.println("Error for text:" + text);		}		return "";    }    public ArrayList<Language> detectLangs(String text) throws LangDetectException {        Detector detector = DetectorFactory.create();        detector.append(preProcessTweet(text));        return detector.getProbabilities();    }        public static void main(String args[]) {		System.out.println(LanguageClassifier.getInstance().detect("Do you know this is actually a english sentence?").equals("en"));    }}